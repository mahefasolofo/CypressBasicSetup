name: CI

on:
  push:
    branches:
      - dev

jobs:
  verification:
    name : verification
    runs-on: ubuntu-20.04
    
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: Install dependencies
      run: npm ci
      #vÃ©rifier que les fichiers sont bons d'abord avant de lancer les tests
    - name: verification
      run: npm run lint
    #Effacer les anciennes tests
    -name : delete old reports
      run: npm run delete:reports
    -name: run tests
      run: npx cypress run --reporter mochawesome
    -name: merge
      run: npx mochawesome-merge "cypress/results/*.json" > mochawesome.json
    - name: transform to HTML
      run: npx marge mochawesome.json

 
      
  
